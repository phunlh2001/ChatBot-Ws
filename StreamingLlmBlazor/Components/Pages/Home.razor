@page "/"
@rendermode InteractiveServer

<PageTitle>Home</PageTitle>

<h3>Chatbot Demo</h3>

<style>
    .chat-container {
        display: flex;
        flex-direction: column;
        height: 80vh;
    }

    .chat-history {
        flex: 1;
        overflow-y: auto;
        padding: 10px;
        border: 1px solid #ccc;
    }

    .chat-line {
        margin-bottom: 8px;
    }

        .chat-line.user {
            text-align: right;
        }

        .chat-line.bot {
            text-align: left;
        }

    .chat-input {
        display: flex;
        gap: 8px;
    }
</style>

<div class="chat-container">

    <div class="chat-history">
        @foreach (var msg in Messages)
        {
            <div class="chat-line @(msg.Role)">
                <b>@msg.Role:</b> @(string.IsNullOrEmpty(msg.Content) ? "..." : msg.Content)
            </div>
        }
    </div>

    <div class="chat-input">
        <input @bind="Input"
               @bind:event="oninput"
               @onkeydown="HandleKey"
               placeholder="Type message..." />

        <button class="btn btn-primary" @onclick="Generate">Send</button>
    </div>

</div>
